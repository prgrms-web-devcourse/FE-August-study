âœ” _Javascript ê¸°ì¤€ì˜_ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì— ëŒ€í•œ ê³µë¶€



# â“ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜(Garbage Collection, GC)

- ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²• ì¤‘ í•˜ë‚˜
- ìë™ ë©”ëª¨ë¦¬ ê´€ë¦¬ ë°©ë²•
- ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ë¥¼ ìë™ìœ¼ë¡œ í•´ì œí•˜ëŠ” ê²ƒ

---



# â“ ë©”ëª¨ë¦¬ ìƒëª… ì£¼ê¸°

1. (ë³€ìˆ˜ ì„ ì–¸) -> í•„ìš”í•œ ë©”ëª¨ë¦¬ **í• ë‹¹**

   â€‹                â¬‡

2. í• ë‹¹ëœ ë©”ëª¨ë¦¬ **ì‚¬ìš©** (ì½ê¸°, ì“°ê¸°)

   â€‹                â¬‡

3. í•´ë‹¹ ë©”ëª¨ë¦¬ê°€ í•„ìš” ì—†ì–´ì§€ë©´ **í•´ì œ**

- (í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì— ìƒê´€ X) ì¼ë°˜ì ì¸ ìƒëª… ì£¼ê¸°
- ì €ê¸‰ í”„ë¡œê·¸ë˜ë° ì–¸ì–´(C ë“±)ì—ì„œëŠ” 1,3ì˜ ê³¼ì •ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ **ì§ì ‘** í•´ì¤Œ (í•´ì œí•´ì£¼ëŠ” í•¨ìˆ˜ì¸ malloc(), free())ê³¼ ê°™ì€ í•¨ìˆ˜ ì¡´ì¬, í•˜ì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” ì´ëŸ° í•¨ìˆ˜ ì—†ìŒ)
- But, ê³ ê¸‰ í”„ë¡œê·¸ë˜ë° ì–¸ì–´(Java, Javascript ë“±)ì—ì„œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ í•˜ì§€ ì•Šì•„ë„ **ìë™ìœ¼ë¡œ** í• ë‹¹ê³¼ í•´ì œê°€ ì´ë£¨ì–´ì§.
- ë³€ìˆ˜ê°€ ì„ ì–¸ë˜ë©´ ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹í•¨.
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì—”ì§„ì— ë‚´ì¥ëœ ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ì–´ ê°ì²´ë“¤ì„ ëª¨ë‹ˆí„°ë§í•˜ë©°, ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ê°ì²´ëŠ” ì‚­ì œí•¨
- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šì„ ë³€ìˆ˜ì™€ í•¨ìˆ˜ë¥¼ Heap(ë©”ëª¨ë¦¬ í™)ì—ì„œ ì œê±°í•¨ìœ¼ë¡œì¨ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•¨. ì´ëŸ¬í•œ ì—­í• ì„ ìˆ˜í–‰í•´ì£¼ëŠ” ë„êµ¬ë¥¼ Garbage Collectorë¼ê³  í•¨.



### ğŸ›‘ìš©ì–´ ì •ë¦¬

- ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ = ìë™ ë©”ëª¨ë¦¬ ê´€ë¦¬ **ì•Œê³ ë¦¬ì¦˜**(ë°©ë²•)
- ê°€ë¹„ì§€ ì»¬ë ‰í„° = ì‹œìŠ¤í…œì—ì„œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ì‘ì—…ì„ **ìˆ˜í–‰**í•˜ëŠ” **ê°ì²´**
- ê°€ë¹„ì§€ = ìœ íš¨í•˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ ì£¼ì†Œ ì¤‘ **ì•„ì§ í•´ì œë˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬**(= í•´ì œë˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ ì˜ì—­) (= ì •ë¦¬ë˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬) (= ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬)

---



# â“ ëª©ì 

- ë©”ëª¨ë¦¬ í• ë‹¹ì„ ì¶”ì í•˜ê³  í• ë‹¹ëœ ë©”ëª¨ë¦¬ ë¸”ë¡ì´ ë”ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì€ì§€ë¥¼ íŒë‹¨í•˜ì—¬ í•´ì œ



# â“ í•„ìš”í•˜ì§€ ì•Šì€ì§€ ì–´ë–»ê²Œ íŒë³„í• ê¹Œ

- *ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜(Reference Counting Algorithms)*ê³¼ *í‘œì‹œí•˜ê³  ì“¸ê¸° ì•Œê³ ë¦¬ì¦˜(Mark and Sweep Algorithms)*ê°€ ìˆë‹¤.


> <span style="font-size:1.2em">ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜(Reference Counting Algorithms)</span>

- â—â—ì°¸ì¡°â—â—

- <span style="color:#AD9AEE">ë” ì´ìƒ í•„ìš”ì—†ëŠ” ê°ì²´ë¥¼ **ì–´ë–¤ ë‹¤ë¥¸ ê°ì²´ë„ "ì°¸ì¡°"í•˜ì§€ ì•ŠëŠ” ê°ì²´**ë¡œ ì •ì˜í•¨</span>

- ì–´ë–¤ ê°’ì— ëŒ€í•´ ì–´ë””ì—ì„œë„ ì°¸ì¡°ë˜ì§€ ì•Šê³  ìˆìœ¼ë©´ ì´ ê°’ì„ ê°€ë¹„ì§€ë¡œ ê°„ì£¼í•˜ê³  í•´ì œí•¨

- ê° ê°ì²´ê°€ ì–¼ë§ˆë‚˜ ë§ì´ ì°¸ì¡°ë˜ëŠ”ì§€ë¥¼ ì¹´ìš´íŠ¸í•¨

- âŒí•œê³„ì  : ìˆœí™˜ì°¸ì¡°ì¸ ê²½ìš° ê°€ë¹„ì§€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•¨

    function f() {
    let x = {};
    let y = {};
    x.a = y;   //xëŠ” yë¥¼ ì°¸ì¡°í•œë‹¤
    y.a = x;   //yëŠ” xë¥¼ ì°¸ì¡°í•œë‹¤
    }
  
    f();

  => f()í•¨ìˆ˜ê°€ í˜¸ì¶œ í›„ì— ì‹¤í–‰ì´ ëë‚˜ë©´ ë‚´ë¶€ ìš”ì†ŒëŠ” ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ì´ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ê°€ í•´ì œë˜ì–´ì•¼ í•¨. ê·¼ë° ì„œë¡œ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê°€ë¹„ì§€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•¨ => ë©”ëª¨ë¦¬ê°€ í•´ì œë˜ì§€ ì•Šê³  ê³„ì† ë‚¨ì•„ìˆìŒ => f()í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ x,y ê°ì²´ë§Œí¼ì˜ ë©”ëª¨ë¦¬ê°€ ê³„ì† í• ë‹¹ë˜ì–´ ë©”ëª¨ë¦¬ê°€ ë‚­ë¹„ë¨.

  
> <span style="font-size:1.2em">í‘œì‹œí•˜ê³  ì“¸ê¸° ì•Œê³ ë¦¬ì¦˜(Mark and Sweep Algorithms)</span>

- ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜ì˜ í•œê³„ë¥¼ ê·¹ë³µí•œ ì•Œê³ ë¦¬ì¦˜ => ê°€ì¥ ë§ì´ ì“°ì´ëŠ” ì•Œê³ ë¦¬ì¦˜

- <span style="color:#AD9AEE">ë” ì´ìƒ í•„ìš”ì—†ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ **ë‹¿ì„ ìˆ˜ ì—†ëŠ” ì˜¤ë¸Œì íŠ¸**ë¡œ ì •ì˜</span>

- ì–´ë–¤ ê°ì²´ê°€ ê°€ë¹„ì§€ê°€ ì•„ë‹Œì§€ í‘œì‹œ(mark)í•˜ê³ , ê·¸ ë‹¤ìŒ ë§ˆí¬ê°€ ë˜ì§€ ì•Šì€ ê°€ë¹„ì§€ë“¤ì€ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•¨(sweep)

- ìµœìƒìœ„ ê°ì²´ì¸ ë£¨íŠ¸(windowê°ì²´ ë˜ëŠ” globalê°ì²´)ì—ì„œ ì‹œì‘í•´ì„œ ë‹¿ì„ ìˆ˜ ì—†ëŠ” ê°ì²´ëŠ” ê°€ë¹„ì§€ë¡œ ì¸ì‹

![image](https://user-images.githubusercontent.com/55550034/129959179-5b1f60ab-c0e2-40fe-a653-4203bb1760f1.png)

- ì–´ë–¤ ê°ì²´ì™€ ì—°ê²°ë˜ì–´ ìˆë”ë¼ë„ ë£¨íŠ¸(windowê°ì²´ í˜¹ì€ globalê°ì²´)ì—ì„œ ë–¨ì–´ì ¸ ìˆëŠ” ê°ì²´ë“¤ì€ ê°€ë¹„ì§€ë¡œ ì¸ì‹ -> ë ˆí¼ëŸ°ìŠ¤ ì¹´ìš´íŠ¸ ì•Œê³ ë¦¬ì¦˜ì˜ í•œê³„ì ì¸ ìˆœí™˜ì°¸ì¡°ì¼ ë•Œ í•´ì œë˜ì§€ ì•ŠëŠ” ë¬¸ì œ í•´ê²°

- âŒí•œê³„ì 

  - ìˆ˜ë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•  ìˆ˜ ì—†ìŒ(ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ê°€ ì—†ìŒ)
  - ê°œë°œìê°€ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ ì •í™•íˆ ì–¸ì œ ì‘ë™í• ì§€ ì•Œê¸°ê°€ ì–´ë ¤ì›€ => ì¦‰, ë•Œì— ë”°ë¼ í”„ë¡œê·¸ë¨ì´ ì‹¤ì œë¡œ í•„ìš”í•œ ê²ƒ ë³´ë‹¤ ë” ë§ì€ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

---

> references

[https://engineering.huiseoul.com/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9E%91%EB%8F%99%ED%95%98%EB%8A%94%EA%B0%80-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC-4%EA%B0%80%EC%A7%80-%ED%9D%94%ED%95%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%88%84%EC%88%98-%EB%8C%80%EC%B2%98%EB%B2%95-5b0d217d788d](https://engineering.huiseoul.com/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9E%91%EB%8F%99%ED%95%98%EB%8A%94%EA%B0%80-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B4%80%EB%A6%AC-4%EA%B0%80%EC%A7%80-%ED%9D%94%ED%95%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%88%84%EC%88%98-%EB%8C%80%EC%B2%98%EB%B2%95-5b0d217d788d)
[https://canoe726.tistory.com/37](https://canoe726.tistory.com/37)
[https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management](https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Managementhttps://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management)