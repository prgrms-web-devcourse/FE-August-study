## 이터레이션 프로토콜의 정의

이터레이션 프로토콜은 ES6 이후 **데이터 컬렉션을 통일된 방식으로 순회하기 위해 미리 약속한 규칙**입니다. **데이터 컬렉션을** 이터레이션 프로토콜을 준수하는 **이터러블로 통일해 for...of 문, 스프레드 문법, 배열 디스트럭처링 할당을 사용**할 수 있게 되었습니다.

* 컬렉션 : 여러 자료들을 담기 위해 자료구조, 알고리즘으로 설계하고 구현한 집합체
  (Array, String, Map, Set, DOM 컬렉션)

## 이터레이션 프로토콜의 종류

### 1) 이터러블 프로토콜

이터러블 프로토콜은 **Symbol.iterator를 호출**하면 이터레이터 프로토콜을 준수한 **이터레이터를 반환**하는 규약입니다.

### 2) 이터레이터 프로토콜

이터레이터가 next 메서드를 소유하며 **next 메서드를 호출**하면 이터러블을 순회해 value와 done 프로퍼티를 갖는 **이터레이터 리절트 객체를 반환**하는 규약입니다.

## 이터러블

**이터러블 프로토콜을 준수한 객체**를 이터러블이라고 합니다. 배열처럼 프로토타입의 Symbol.iterator 메서드를 상속받거나, Symbol.iterator를 프로터피 키로 사용한 메서드를 직접 구현한 객체를 말합니다.

### 빌트인 이터러블

- Array
- String
- Map
- Set
- TypedArray
- arguments
- DOM Data Structure
- ~~Object~~ → 사용자 정의 이터러블로 구현

### 이터러블인지 확인하는 함수

```javascript
const isIterable = v => v !== null && typeof v[Symbol.iterator] === 'function';
```

## 이터레이터

이터러블의 **Symbol.iterator 메서드를 호출하면 이터레이터 프로토콜을 준수한 이터레이터를 반환**합니다. 이터레이터의 next 메서드는 이터러블의 각 요소를 순회하기 위한 포인터 역할을 합니다.

```javascript
const iterator = array[Symbol.iterator]();
console.log('next' in iterator); // true
```

![](https://images.velog.io/images/sanoopark/post/5633d0ea-9910-47f5-815b-d0e3abac5970/image.png)

 **next 메서드를 호출하면 각 요소를 순회한 결과를 나타내는 이터레이터 리절트 객체를 반환**합니다. 이 객체의 value 프로퍼티는 현재 순회 중인 이터러블의 값을 나타내며 done 프로퍼티는 이터러블의 순회 완료 여부를 나타냅니다.

## 이터레이션 프로토콜의 필요성

ES6 이전에는 데이터 컬렉션이 통일된 규약 없이 각자 나름의 구조에서 for 문, for...in 문, forEach 메서드 등 다른 순회 방식을 갖고 있었습니다.

**각각의 순회 방식을 갖는 것은 데이터를 소비하는 측면에서 비효율적**이기 때문에 하나의 통일된 규칙이 필요하게 된 것입니다.

![](https://images.velog.io/images/sanoopark/post/5b0be464-3a58-44c4-9e56-a44c8a81abb2/image.png)

이터러블은 for...of 문, 스프레드 문법, 배열 디스트럭처링 할당과 같은 데이터 소비자에 의해 사용되므로 데이터 공급자의 역할을 합니다.

이처럼 이터레이션 프로토콜은 **다양한 데이터 공급자가 하나의 순회 방식을 갖도록 규정**하여 데이터 소비자가 효율적으로 다양한 공급자를 사용할 수 있도록 데이터 소비자와 데이터 공급자를 연결하는 **인터페이스 역할**을 합니다.

이터레이션 프로토콜이 등장하고 나서 그 전에 할 수 없었던 어떤 기능이 추가된 것은 아닙니다. 이터레이션 프로토콜은 **중요하면서도 자주 사용되는 패턴을 표준화**했다는 데에 의의가 있다고 볼 수 있습니다.

그리고 이러한 이터레이션 프로토콜을 오픈소스 라이브러리 또는 브라우저에서 사용할 수 있는 Web API에 구현된 많은 값들에서 따르고 있습니다.
