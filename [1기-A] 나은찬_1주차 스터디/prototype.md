# Prototype

## JavaScript

---

- 클래스 기반 객체지향 프로그래밍 언어보다 *효율적*이며, 더 강력한 객체지향 프로그래밍 능력을 지니고 있는 **프로토타입 기반의 객체지향 프로그래밍 언어**
- JS에서는 원시타입(Number, String, Boolean, Undefined, Null, Symbol)을 제외한 모든 것이 객체다.(함수, 배열, 정규 표현식 등...)
  <br>
  <br>

## 추상화

---

- 공통적이고 필수적인 속성만 간추려 표현하는 것
- ex) 모든 사람은 자신의 이름과 주소, 주민번호 등 공통으로 갖는 속성이 있다. 약 1,000명의 사람을 코드로 표현한다면?? --> 엄청난 코드의 양이 생길 것이다!  
  <img scr="./img/img01.jpg"><img/>
- 추상화로 공통 속성을 묶어서 표현해보면? --> 반복적인 코딩이 필요없다 === 재사용성이 높다!
  <img scr="./img/img02.jpg"><img/>

<br>
<br>

## 메모리

---

- 생성자로 인스턴스를 생성할 때마다 getInformation 메소드를 중복 생성하고, 모든 인스턴스가 중복 소유한다.
- 불필요한 메모리 낭비와 퍼포먼스 저하가 발생한다.
  <img scr="./img/img03.jpg"><img/>
- 이는 상속을 통해 불필요한 중복을 제거할 수 있으며, JS는 **프로토타입**을 기반으로 상속을 구현한다.
  <img scr="./img/img04.jpg"><img/>

<br>
<br>

## 프로토타입 객체

---

- 객체지향 프로그래밍의 근간을 이루는 객체 간 *상속*을 구현하기 위해 사용.
- 프로토타입은 어떤 객체의 부모 객체 역할을 하는 객체로서 다른 객체에 공유 프로퍼티(메소드 포함)를 제공한다.
- 프로토타입을 상속받은 하위(자식) 객체는 마치 자신의 프로퍼티인 것처럼 자유롭게 사용 가능하다.
- 모든 객체는 [[Prototype]]이라는 내부 슬롯을 가지며, 객체 생성 방식에 따라 프로토타입이 결정된다.

<br>
<br>

## \_\_proto\_\_ 접근자 프로퍼티와 prototype 프로퍼티

---

- 모든 객체는 \_\_proto\_\_ 접근자 프로퍼티를 통해 자신의 프로토타입 내부 슬롯([[Prototype]])에 접근할 수 있다.
- \_\_proto\_\_ 접근자 프로퍼티는 상속을 통해 사용된다.(Object.prototype의 프로퍼티다!)
- 상호 참조에 의한 프로토타입 체인이 생성되는 것을 방지하기 위해 \_\_proto\_\_ 접근자 프로퍼티를 사용한다.
- 즉, 프로토타입 체인은 단방향 링크드 리스트로 구현되어야 한다. --> 무한 루프에 빠지지 않기 위해!
  <img scr="./img/img05.jpg"><img/>

- 함수 객체만이 소유하는 protytype 프로퍼티는 생성자 함수가 생성할 인스턴스의 프로토타입을 가리킨다.
- \_\_proto\_\_ 접근자 프로퍼티와 prototype은 사용 주체가 다를 뿐 결국 동일한 프로토타입을 가리킨다.

---

| 구분                          | 소유                | 값                | 사용주체    | 사용 목적                                                                    |
| ----------------------------- | ------------------- | ----------------- | ----------- | ---------------------------------------------------------------------------- |
| \_\_proto\_\_ 접근자 프로퍼티 | 모든 객체           | 프로토타입의 참조 | 모든 객체   | 객체가 자신의 프로토타입에 접근 또는 교체하기 위해 사용                      |
| prototype 프로퍼티            | Constructor(생성자) | 프로토타입의 참조 | 생성자 함수 | 생성자 함수가 자신이 생성할 객체(인스턴스)의 프로토타입을 할당하기 위해 사용 |

---

<img scr="./img/img06.jpg"><img/>

<br>
<br>

## 프로토타입 생성 시점

---

- 프로토타입은 생성자 함수가 생성되는 시점에 함께 생성된다.

  - 사용자 정의 생성자 함수

    - constructor는 함수 정의가 평가되어 함수 객체를 생성하는 시점에 함께 생성(런타임 이전에 생성)

  - 빌트인 생성자 함수
    - 모든 빌트인 생성자 함수는 전역 객체가 생성되는 시점에 생성
    - 전역 객체는 코드가 실행되기 이전 단계인 JS 엔진에 의해 생성되는 특수한 객체
    - 브라우저 환경에서는 window, Node.js 환경에서는 global 객체를 의미한다.
